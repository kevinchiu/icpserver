<html><head><title>Test</title>
	<script src="http://maps.google.com/maps?file=api&amp;v=2.x&amp;key=ABQIAAAAm6tjGmDNXD8-jyT2eIsIQBQ8nda2l8z-oXOZMhvo4DA8FzaARRR62hKMB-QX1F9yfQ_8PQZ-ug8jsA&amp;hl=&amp;sensor=false" type="text/javascript"></script>
	<script src="/javascripts/ym4r-gm.js" type="text/javascript"></script>
	
	<style type="text/css">
	 v:* { behavior:url(#default#VML);}
	</style>
	
	<script type="text/javascript">
	var map;
	window.onload = addCodeToFunction(window.onload,function() {
	if (GBrowserIsCompatible()) {
	map = new GMap2(document.getElementById("map_div"));
	map.setCenter(new GLatLng(42.360799,-71.08768),15);map.addOverlay(addInfoWindowToMarker(new GMarker(new GLatLng(42.360799,-71.08768),{title : "Target"}),"lat: 42.360799<br>lng: -71.08768<br>theta: 0.0<br>phi: 0.0<br>psi: 0.0<br>",{}));map.addControl(new GLargeMapControl());
	map.addControl(new GMapTypeControl());
	
	GEvent.addListener(map, "click", function(overlay, point){
		 map.clearOverlays(); 	
		 if (point) {
		 map.addOverlay(new GMarker(point));
		 map.panTo(point);
		 document.getElementById("target_lat").value = point.lat(); //models field name 
		 document.getElementById("target_lng").value = point.lng(); //models field name
		 }
	});
	
	}
	});
	</script>

</head><body>
<%= @map.div(:width => 800, :height => 600) %>
<p>
<% form_for :target, @target, :url => {:controller => "target", :action => "create"} do |f| %>
	<%= f.text_field :lat%> lat <br>
	<%= f.text_field :lng %> lng <br>
	<%= f.text_field :theta %> theta <br>
	<%= f.text_field :phi %> phi <br>
	<%= f.text_field :psi %> psi <br>
	<%= submit_tag 'Create'%>
<% end %>
</p>


<script type="text/javascript">
	map = new GMap2(document.getElementById("map_div"));
	
</script>

</body></html>
